# Story 01.07: Setup Frontend React Application

**Epic:** Epic 1 - Foundation Setup
**Story ID:** STORY-01-07
**Priority:** P0 (Blocking)
**Estimated:** 3 hours

---

## Status

**Draft**

---

## Story

**As a** frontend developer,
**I want** the React application initialized with Vite, TypeScript, Material-UI, and feature-based folder structure,
**so that** I can develop frontend features with modern tooling, type safety, and organized code architecture.

---

## Acceptance Criteria

1. React app initialized with Vite in `frontend/web/`
2. TypeScript configured with strict mode
3. Material-UI (MUI) installed and configured with custom theme
4. Zustand installed for state management
5. TanStack Query installed for data fetching
6. React Router installed for routing
7. Axios installed and configured for HTTP client
8. Vite config includes path aliases (@/)
9. Feature-based folder structure created
10. `npm run dev` starts development server at localhost:3000
11. Basic App.tsx with routing skeleton
12. ESLint and Prettier configured

---

## Tasks / Subtasks

- [ ] Initialize React app with Vite (AC: 1, 2, 10)
  - [ ] Navigate to `frontend/` directory
  - [ ] Run `npm create vite@latest web -- --template react-ts`
  - [ ] Navigate to `frontend/web/`
  - [ ] Run `npm install`
  - [ ] Test: `npm run dev` starts successfully
  - [ ] Verify app accessible at localhost:5173 (Vite default)

- [ ] Configure TypeScript strict mode (AC: 2)
  - [ ] Update `tsconfig.json`
  - [ ] Enable `"strict": true`
  - [ ] Enable `"noImplicitAny": true`
  - [ ] Enable `"strictNullChecks": true`
  - [ ] Add path aliases configuration

- [ ] Install UI and core dependencies (AC: 3, 4, 5, 6, 7)
  - [ ] Install MUI: `npm install @mui/material @emotion/react @emotion/styled @mui/icons-material`
  - [ ] Install Zustand: `npm install zustand`
  - [ ] Install TanStack Query: `npm install @tanstack/react-query @tanstack/react-query-devtools`
  - [ ] Install React Router: `npm install react-router-dom`
  - [ ] Install Axios: `npm install axios`
  - [ ] Install form handling: `npm install react-hook-form zod @hookform/resolvers`
  - [ ] Install utilities: `npm install date-fns recharts`

- [ ] Install dev dependencies (AC: 12)
  - [ ] Install types: `npm install -D @types/node`
  - [ ] Install testing: `npm install -D vitest @testing-library/react @testing-library/jest-dom @testing-library/user-event`
  - [ ] Install ESLint: `npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-react-hooks`
  - [ ] Install Prettier: `npm install -D prettier`

- [ ] Configure Vite (AC: 8, 10)
  - [ ] Update `vite.config.ts`
  - [ ] Add path aliases (@/ for src/)
  - [ ] Configure dev server port (3000)
  - [ ] Add proxy for API Gateway (localhost:5000)
  - [ ] Configure build output directory

- [ ] Create MUI theme (AC: 3)
  - [ ] Create `src/theme/index.ts`
  - [ ] Define custom color palette
  - [ ] Configure typography
  - [ ] Export theme provider wrapper

- [ ] Create feature-based folder structure (AC: 9)
  - [ ] Create `src/components/common/`
  - [ ] Create `src/components/layout/`
  - [ ] Create `src/components/auth/`
  - [ ] Create `src/components/transactions/`
  - [ ] Create `src/components/budgets/`
  - [ ] Create `src/components/insights/`
  - [ ] Create `src/components/notifications/`
  - [ ] Create `src/pages/`
  - [ ] Create `src/hooks/`
  - [ ] Create `src/services/`
  - [ ] Create `src/stores/`
  - [ ] Create `src/types/`
  - [ ] Create `src/utils/`
  - [ ] Create `src/constants/`

- [ ] Configure API service (AC: 7)
  - [ ] Create `src/services/api.service.ts`
  - [ ] Configure Axios instance
  - [ ] Add request interceptor for auth tokens
  - [ ] Add response interceptor for error handling
  - [ ] Export API client

- [ ] Create routing skeleton (AC: 6, 11)
  - [ ] Create `src/router.tsx`
  - [ ] Configure React Router with createBrowserRouter
  - [ ] Add placeholder routes (Dashboard, Login, etc.)
  - [ ] Update `App.tsx` to use RouterProvider
  - [ ] Create basic layout component

- [ ] Configure ESLint and Prettier (AC: 12)
  - [ ] Create `.eslintrc.json`
  - [ ] Create `.prettierrc`
  - [ ] Add lint scripts to package.json
  - [ ] Add format scripts to package.json
  - [ ] Test: `npm run lint` passes

- [ ] Verify build and dev server (AC: 10)
  - [ ] Test: `npm run dev` starts at localhost:3000
  - [ ] Test: `npm run build` completes successfully
  - [ ] Test: `npm run preview` serves built app
  - [ ] Verify no TypeScript errors

---

## Dev Notes

### Architecture Reference

- **Primary Source:** `docs/architecture/source-tree.md` Section 4 (Frontend Structure)
- **Tech Stack:** `docs/architecture/tech-stack.md` Section 3 (Frontend Technology Stack)

### Vite Configuration

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:5000',
        changeOrigin: true,
      },
    },
  },
});
```

### TypeScript Configuration

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

### MUI Theme Template

```typescript
// src/theme/index.ts
import { createTheme } from '@mui/material/styles';

export const theme = createTheme({
  palette: {
    primary: {
      main: '#1976d2',
    },
    secondary: {
      main: '#dc004e',
    },
  },
  typography: {
    fontFamily: [
      '-apple-system',
      'BlinkMacSystemFont',
      '"Segoe UI"',
      'Roboto',
      '"Helvetica Neue"',
      'Arial',
      'sans-serif',
    ].join(','),
  },
});
```

### API Service Template

```typescript
// src/services/api.service.ts
import axios, { AxiosInstance } from 'axios';

class ApiService {
  private client: AxiosInstance;

  constructor() {
    this.client = axios.create({
      baseURL: import.meta.env.VITE_API_BASE_URL || '/api',
      timeout: 10000,
      headers: {
        'Content-Type': 'application/json',
      },
    });

    // Request interceptor
    this.client.interceptors.request.use(
      (config) => {
        // Add auth token from store (implement later)
        // const token = useAuthStore.getState().token;
        // if (token) {
        //   config.headers.Authorization = `Bearer ${token}`;
        // }
        return config;
      },
      (error) => Promise.reject(error)
    );

    // Response interceptor
    this.client.interceptors.response.use(
      (response) => response,
      (error) => {
        if (error.response?.status === 401) {
          // Handle unauthorized (implement later)
          // useAuthStore.getState().logout();
        }
        return Promise.reject(error);
      }
    );
  }

  async get<T>(url: string): Promise<T> {
    const response = await this.client.get<T>(url);
    return response.data;
  }

  async post<T>(url: string, data: unknown): Promise<T> {
    const response = await this.client.post<T>(url, data);
    return response.data;
  }

  async put<T>(url: string, data: unknown): Promise<T> {
    const response = await this.client.put<T>(url, data);
    return response.data;
  }

  async delete<T>(url: string): Promise<T> {
    const response = await this.client.delete<T>(url);
    return response.data;
  }
}

export const apiService = new ApiService();
```

### Router Template

```typescript
// src/router.tsx
import { createBrowserRouter } from 'react-router-dom';
import App from './App';

export const router = createBrowserRouter([
  {
    path: '/',
    element: <App />,
    children: [
      {
        index: true,
        element: <div>Dashboard - Coming Soon</div>,
      },
      {
        path: 'login',
        element: <div>Login - Coming Soon</div>,
      },
      {
        path: 'transactions',
        element: <div>Transactions - Coming Soon</div>,
      },
      {
        path: 'budgets',
        element: <div>Budgets - Coming Soon</div>,
      },
    ],
  },
]);
```

### App.tsx Template

```typescript
// src/App.tsx
import { ThemeProvider } from '@mui/material/styles';
import CssBaseline from '@mui/material/CssBaseline';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
import { Outlet } from 'react-router-dom';
import { theme } from './theme';

const queryClient = new QueryClient();

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <ThemeProvider theme={theme}>
        <CssBaseline />
        <Outlet />
      </ThemeProvider>
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  );
}

export default App;
```

### main.tsx Template

```typescript
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { RouterProvider } from 'react-router-dom';
import { router } from './router';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <RouterProvider router={router} />
  </React.StrictMode>
);
```

### ESLint Configuration

```json
// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:react-hooks/recommended"
  ],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": "latest",
    "sourceType": "module"
  },
  "plugins": ["@typescript-eslint", "react-hooks"],
  "rules": {
    "@typescript-eslint/no-explicit-any": "error",
    "@typescript-eslint/explicit-function-return-type": "warn"
  }
}
```

### Prettier Configuration

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2
}
```

### Package.json Scripts

```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "format": "prettier --write \"src/**/*.{ts,tsx}\"",
    "test": "vitest"
  }
}
```

### Testing

#### Testing Standards

**Test Location:** No unit tests required for this story (just scaffolding)

**Manual Verification:**
```bash
# Navigate to frontend
cd frontend/web

# Install dependencies
npm install

# Start dev server
npm run dev
# Should start at http://localhost:3000

# Build application
npm run build
# Should complete without errors

# Run linter
npm run lint
# Should pass with 0 errors

# Preview production build
npm run preview
# Should serve built app
```

**Browser Verification:**
- Open http://localhost:3000
- Should see MUI-styled page
- Should see "Dashboard - Coming Soon" text
- No console errors
- React DevTools should detect React app
- TanStack Query DevTools visible (toggle)

**Folder Structure Verification:**
```bash
# Verify folder structure
tree src
# Should show all feature folders
```

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-06 | 1.0 | Initial story creation from epic | Winston (Architect) |

---

## Dev Agent Record

### Agent Model Used

_[To be filled by dev agent]_

### Debug Log References

_[To be filled by dev agent]_

### Completion Notes List

_[To be filled by dev agent]_

### File List

_[To be filled by dev agent]_

---

## QA Results

_[To be filled by QA agent after implementation]_
